# TTSpy - Google Text-to-Speech GUI

テキストファイルを Google Cloud Text-to-Speech API を利用して音声ファイル (MP3) に変換するためのシンプルなGUIアプリケーションです。

## 機能

*   **テキストファイルの選択**: 音声に変換したいテキストファイル (`.txt`, [.md](cci:7://file:///Users/h_ikuma/Downloads/python/TTSpy/README.md:0:0-0:0), `.rtf`, `.html`, `.xml` など) を選択できます。
*   **保存先の指定**: 生成されたMP3ファイルの保存先ディレクトリを指定できます (デフォルトは `results` フォルダ)。
*   **再生速度の調整**: 音声の再生速度を0.25倍から4.0倍まで調整できます。
*   **APIキー管理**: Google Cloud APIキーをGUIから設定・保存できます (`.env` ファイルに保存されます)。
*   **音声変換**: 選択したテキストファイルと設定に基づいてMP3ファイルを生成します。
*   **音声再生**: 生成されたMP3ファイルを再生できます (macOS の `afplay` コマンドを使用)。
*   **ステータス表示**: 処理の状況を簡単なメッセージで表示します。

## 必要なもの

*   Python 3.x
*   必要なPythonライブラリ (詳細は `requirements.txt` を参照してください)
*   Google Cloud Platform アカウントと有効な Text-to-Speech API キー
    *   [Google Cloud Text-to-Speech ドキュメント](https://cloud.google.com/text-to-speech/docs/quickstart-client-libraries) を参考にAPIキーを取得してください。

## インストール

1.  このリポジトリをクローンまたはダウンロードします。
    ```bash
    git clone https://github.com/ikuma-hiroyuki/TTSpy.git
    cd TTSpy
    ```
2.  必要なライブラリをインストールします。
    ```bash
    pip install -r requirements.txt
    ```

## 使い方

1.  ターミナルで以下のコマンドを実行してアプリケーションを起動します。
    ```bash
    python main.py
    ```
2.  **APIキーの設定**:
    *   初回起動時やAPIキーが未設定の場合、まず「APIキー設定」ボタンをクリックします。
    *   表示されたダイアログに、取得した Google Cloud API キーを入力し、「OK」をクリックして保存します。キーはプロジェクトルートの `.env` ファイルに保存されます。
3.  **入力ファイルの選択**:
    *   「入力テキストファイル」セクションの「選択...」ボタンをクリックし、音声に変換したいテキストファイルを選択します。
4.  **保存先の選択 (任意)**:
    *   デフォルトでは `results` フォルダに保存されます。変更したい場合は、「MP3保存先ディレクトリ」セクションの「選択...」ボタンをクリックして、任意のディレクトリを選択します。
5.  **再生速度の調整 (任意)**:
    *   スライダーを動かして、希望の再生速度を設定します (例: 1.0倍速、1.5倍速など)。
6.  **音声ファイルの作成**:
    *   「音声ファイル作成」ボタンをクリックします。変換処理が開始され、ステータスが表示されます。
7.  **再生**:
    *   変換が正常に完了すると、「再生」ボタンがクリック可能になります。クリックすると、生成されたMP3ファイルが再生されます。

## 注意点

*   **APIキー**: APIキーは `.env` ファイルに平文で保存されます。このファイルの取り扱いには十分注意してください。リポジトリ等に誤ってコミットしないようにしてください。(`.gitignore` に `.env` を追加することを推奨します。)
*   **Google Cloud 利用料金**: Google Cloud Text-to-Speech API の利用には、無料枠を超える場合に料金が発生することがあります。Google Cloud の料金体系を確認してください。
*   **再生機能**: 音声再生機能は macOS の `afplay` コマンドに依存しています。Windows や Linux では再生機能が動作しない可能性があります。
*   **エラー**: APIキーが無効な場合や、ネットワーク接続に問題がある場合、変換に失敗することがあります。エラーメッセージを確認してください。
